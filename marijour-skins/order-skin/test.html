<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Skin Test</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <link rel="stylesheet" href="./dist/order-skin.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background-color: #f5f5f5;
    }
    
    .test-container {
      min-height: 100vh;
    }
    
    .test-header {
      text-align: center;
      padding: 20px;
      background: #333;
      color: white;
      margin-bottom: 20px;
    }
    
    h1 {
      margin: 0;
    }
    
    .note {
      margin-top: 10px;
      font-size: 14px;
      color: #ccc;
    }
  </style>
</head>
<body>
  <div class="test-header">
    <h1>Order Skin 테스트</h1>
    <p class="note">주문서 작성 페이지입니다. 주소 검색은 실제 API 연동이 필요합니다.</p>
  </div>
  
  <div class="test-container">
    <div id="order-form"></div>
  </div>
  
  <script src="./dist/order-skin.umd.js"></script>
  <script>
    // 테스트 데이터
    const orderItems = [
      {
        id: 1,
        name: '프리미엄 오가닉 코튼 베드 시트 세트',
        thumbnailUrl: 'https://via.placeholder.com/150/FF6B6B/FFFFFF?text=BED',
        price: 89000,
        quantity: 1,
        options: [
          { name: '사이즈', value: '퀸 (160x200)' },
          { name: '색상', value: '화이트' }
        ]
      },
      {
        id: 2,
        name: '프리미엄 구스다운 베개',
        thumbnailUrl: 'https://via.placeholder.com/150/4ECDC4/FFFFFF?text=PILLOW',
        price: 59000,
        quantity: 2
      }
    ];
    
    const coupons = [
      {
        id: '1',
        code: 'WELCOME10',
        name: '신규회원 10% 할인',
        discountType: 'percent',
        discountValue: 10,
        minOrderAmount: 50000
      },
      {
        id: '2',
        code: 'SAVE5000',
        name: '5,000원 할인 쿠폰',
        discountType: 'amount',
        discountValue: 5000,
        minOrderAmount: 30000
      }
    ];
    
    const paymentMethods = [
      { id: 'bank', name: '무통장입금', type: 'bank', enabled: true },
      { id: 'card', name: '신용카드', type: 'card', enabled: false },
      { id: 'kakao', name: '카카오페이', type: 'simple', enabled: false },
      { id: 'naver', name: '네이버페이', type: 'simple', enabled: false }
    ];
    
    const banks = [
      { code: '004', name: 'KB국민은행' },
      { code: '011', name: '농협은행' },
      { code: '020', name: '우리은행' },
      { code: '088', name: '신한은행' },
      { code: '090', name: '카카오뱅크' },
      { code: '092', name: '토스뱅크' }
    ];
    
    const deliveryRequests = [
      { value: 'door', label: '문 앞에 놓아주세요' },
      { value: 'security', label: '경비실에 맡겨주세요' },
      { value: 'parcel', label: '택배함에 넣어주세요' },
      { value: 'call', label: '배송 전 연락주세요' },
      { value: 'direct', label: '직접 받을게요' },
      { value: 'fragile', label: '파손주의 - 조심히 다뤄주세요' },
      { value: 'custom', label: '직접 입력' }
    ];
    
    const termsLinks = [
      { id: 'purchase', label: '구매조건 확인 및 결제대행 서비스 약관 동의', url: '/terms/purchase', required: true },
      { id: 'privacy', label: '개인정보 제3자 제공 동의', url: '/terms/privacy', required: true },
      { id: 'marketing', label: '마케팅 정보 수신 동의', url: '/terms/marketing', required: false }
    ];
    
    // 사전 입력된 주문자 정보 (로그인한 경우)
    const ordererInfo = {
      name: '홍길동',
      email: 'test@example.com',
      phone: '010-1234-5678'
    };
    
    // 유틸리티 및 액션 함수
    const utils = {
      navigate: (path) => {
        console.log('Navigate to:', path);
        alert(`페이지 이동: ${path}`);
      }
    };
    
    const actions = {
      searchAddress: (callback) => {
        // 실제로는 다음 주소 API를 사용
        alert('실제 환경에서는 다음 주소 API가 연동됩니다.');
        // 테스트용 더미 데이터
        callback({
          zonecode: '12345',
          roadAddress: '서울특별시 강남구 테헤란로 123'
        });
      },
      submitOrder: async (orderData) => {
        console.log('Order submitted:', orderData);
        alert(`주문이 완료되었습니다!\\n주문번호: TEST-${Date.now()}\\n결제금액: ${orderData.summary.totalPaymentAmount.toLocaleString('ko-KR')}원`);
        utils.navigate('/order/complete');
      }
    };
    
    // 컴포넌트 렌더링
    if (window.OrderSkin) {
      const container = document.getElementById('order-form');
      const root = ReactDOM.createRoot(container);
      root.render(React.createElement(window.OrderSkin, {
        data: {
          items: orderItems,
          ordererInfo: ordererInfo,
          coupons: coupons,
          availablePoints: 5000,
          paymentMethods: paymentMethods,
          banks: banks,
          deliveryRequests: deliveryRequests,
          deliveryFee: 3000,
          freeShippingThreshold: 50000,
          showSameAsOrderer: true,
          showCoupon: true,
          showPoints: true,
          showRefundAccount: true,
          requireTermsAgreement: true,
          termsLinks: termsLinks
        },
        utils: utils,
        actions: actions
      }));
    } else {
      console.error('OrderSkin not loaded');
    }
  </script>
</body>
</html>