/*! For license information please see order-skin.umd.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.OrderSkin=t(require("react")):e.OrderSkin=t(e.React)}(this,e=>(()=>{"use strict";var t={156:t=>{t.exports=e}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a={};n.d(a,{default:()=>P});var o=n(156),l=n.n(o),c=function(){return l().createElement("div",{className:"order-header"},l().createElement("h1",{className:"order-title"},"주문서 작성"),l().createElement("div",{className:"order-steps"},l().createElement("span",{className:"step completed"},"장바구니"),l().createElement("span",{className:"step-arrow"},"→"),l().createElement("span",{className:"step active"},"주문서 작성"),l().createElement("span",{className:"step-arrow"},"→"),l().createElement("span",{className:"step"},"주문 완료")))},i=function(e){var t=e.deliveryInfo,r=e.deliveryRequests,n=e.errors,a=e.onChange,o=e.onAddressSearch;return l().createElement("div",{className:"section delivery-info-section"},l().createElement("h2",{className:"section-title"},"배송지 정보"),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"recipientName",className:"form-label required"},"받는 분"),l().createElement("input",{type:"text",id:"recipientName",className:"form-input ".concat(n.recipientName?"error":""),value:t.recipientName,onChange:function(e){return a("recipientName",e.target.value)},placeholder:"받는 분 성함을 입력해주세요"}),n.recipientName&&l().createElement("span",{className:"error-message"},n.recipientName)),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"recipientPhone",className:"form-label required"},"연락처"),l().createElement("input",{type:"tel",id:"recipientPhone",className:"form-input ".concat(n.recipientPhone?"error":""),value:t.recipientPhone,onChange:function(e){return a("recipientPhone",e.target.value)},placeholder:"010-0000-0000"}),n.recipientPhone&&l().createElement("span",{className:"error-message"},n.recipientPhone)),l().createElement("div",{className:"form-group"},l().createElement("label",{className:"form-label required"},"주소"),l().createElement("div",{className:"address-group"},l().createElement("div",{className:"postal-code-group"},l().createElement("input",{type:"text",className:"form-input ".concat(n.postalCode?"error":""),value:t.postalCode,readOnly:!0,placeholder:"우편번호"}),l().createElement("button",{type:"button",className:"address-search-button",onClick:o},"주소 검색")),l().createElement("input",{type:"text",className:"form-input ".concat(n.roadAddress?"error":""),value:t.roadAddress,readOnly:!0,placeholder:"도로명 주소"}),l().createElement("input",{type:"text",className:"form-input ".concat(n.detailAddress?"error":""),value:t.detailAddress,onChange:function(e){return a("detailAddress",e.target.value)},placeholder:"상세주소를 입력해주세요"}),(n.postalCode||n.roadAddress||n.detailAddress)&&l().createElement("span",{className:"error-message"},n.postalCode||n.roadAddress||n.detailAddress))),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"deliveryRequest",className:"form-label"},"배송 요청사항"),l().createElement("select",{id:"deliveryRequest",className:"form-select",value:t.deliveryRequest,onChange:function(e){return a("deliveryRequest",e.target.value)}},r.map(function(e){return l().createElement("option",{key:e.value,value:e.value},e.label)})),"custom"===t.deliveryRequest&&l().createElement("input",{type:"text",className:"form-input mt-2",value:t.customRequest||"",onChange:function(e){return a("customRequest",e.target.value)},placeholder:"요청사항을 입력해주세요"})))},s=function(e){var t=e.ordererInfo,r=e.errors,n=e.showSameAsOrderer,a=e.sameAsOrderer,o=e.onChange,c=e.onSameAsOrdererChange;return l().createElement("div",{className:"section orderer-info-section"},l().createElement("div",{className:"section-header"},l().createElement("h2",{className:"section-title"},"주문자 정보"),n&&l().createElement("label",{className:"same-as-orderer"},l().createElement("input",{type:"checkbox",checked:a,onChange:function(e){return c(e.target.checked)}}),l().createElement("span",null,"주문자 정보와 동일"))),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"ordererName",className:"form-label required"},"이름"),l().createElement("input",{type:"text",id:"ordererName",className:"form-input ".concat(r.name?"error":""),value:t.name,onChange:function(e){return o("name",e.target.value)},placeholder:"주문자 이름을 입력해주세요"}),r.name&&l().createElement("span",{className:"error-message"},r.name)),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"ordererEmail",className:"form-label required"},"이메일"),l().createElement("input",{type:"email",id:"ordererEmail",className:"form-input ".concat(r.email?"error":""),value:t.email,onChange:function(e){return o("email",e.target.value)},placeholder:"example@email.com"}),r.email&&l().createElement("span",{className:"error-message"},r.email)),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"ordererPhone",className:"form-label required"},"연락처"),l().createElement("input",{type:"tel",id:"ordererPhone",className:"form-input ".concat(r.phone?"error":""),value:t.phone,onChange:function(e){return o("phone",e.target.value)},placeholder:"010-0000-0000"}),r.phone&&l().createElement("span",{className:"error-message"},r.phone)))},u=function(e){var t=e.items;return l().createElement("div",{className:"section order-items-section"},l().createElement("h2",{className:"section-title"},"주문 상품 (",t.length,"개)"),l().createElement("div",{className:"order-items"},t.map(function(e){return l().createElement("div",{key:e.id,className:"order-item"},l().createElement("div",{className:"item-image"},l().createElement("img",{src:e.thumbnailUrl,alt:e.name})),l().createElement("div",{className:"item-info"},l().createElement("h3",{className:"item-name"},e.name),e.options&&e.options.length>0&&l().createElement("div",{className:"item-options"},e.options.map(function(e,t){return l().createElement("span",{key:t,className:"option"},e.name,": ",e.value)})),l().createElement("div",{className:"item-quantity"},"수량: ",e.quantity,"개")),l().createElement("div",{className:"item-price"},(e.price*e.quantity).toLocaleString("ko-KR"),"원"))})))};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r,n=e.coupons,a=e.availablePoints,c=e.selectedCouponId,i=e.usedPoints,s=e.showCoupon,u=e.showPoints,d=e.onCouponSelect,p=e.onPointsChange,f=(t=(0,o.useState)(i.toString()),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw a}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=f[0],h=f[1];return s||u?l().createElement("div",{className:"section coupon-points-section"},l().createElement("h2",{className:"section-title"},"할인 적용"),s&&l().createElement("div",{className:"subsection coupon-subsection"},l().createElement("h3",{className:"subsection-title"},"쿠폰"),l().createElement("div",{className:"form-group"},l().createElement("select",{className:"form-select",value:c||"",onChange:function(e){return d(e.target.value||void 0)}},l().createElement("option",{value:""},"쿠폰을 선택해주세요"),n.filter(function(e){return!e.isUsed}).map(function(e){return l().createElement("option",{key:e.id,value:e.id},e.name," - ",function(e){return"percent"===e.discountType?"".concat(e.discountValue,"%"):"".concat(e.discountValue.toLocaleString("ko-KR"),"원")}(e)," 할인",e.minOrderAmount&&" (".concat(e.minOrderAmount.toLocaleString("ko-KR"),"원 이상)"))})),l().createElement("div",{className:"coupon-info"},"보유 쿠폰: ",n.filter(function(e){return!e.isUsed}).length,"장"))),u&&l().createElement("div",{className:"subsection points-subsection"},l().createElement("h3",{className:"subsection-title"},"포인트"),l().createElement("div",{className:"form-group"},l().createElement("div",{className:"points-input-group"},l().createElement("input",{type:"number",className:"form-input",value:v,onChange:function(e){return t=e.target.value,void((r=parseInt(t)||0)<=a&&(h(t),p(r)));var t,r},placeholder:"0",min:"0",max:a}),l().createElement("button",{type:"button",className:"use-all-button",onClick:function(){h(a.toString()),p(a)}},"모두 사용")),l().createElement("div",{className:"points-info"},"보유 포인트: ",a.toLocaleString("ko-KR"),"P")))):null},p=function(e){var t=e.paymentMethods,r=e.selectedMethodId,n=e.selectedBank,a=e.banks,o=e.onMethodChange,c=e.onBankChange,i=t.find(function(e){return e.id===r});return l().createElement("div",{className:"section payment-method-section"},l().createElement("h2",{className:"section-title"},"결제 수단"),l().createElement("div",{className:"payment-methods"},t.map(function(e){return l().createElement("label",{key:e.id,className:"payment-method-option"},l().createElement("input",{type:"radio",name:"paymentMethod",value:e.id,checked:r===e.id,onChange:function(){return o(e.id)},disabled:!e.enabled}),l().createElement("span",{className:"method-label ".concat(e.enabled?"":"disabled")},e.name))})),"bank"===(null==i?void 0:i.type)&&l().createElement("div",{className:"bank-transfer-info"},l().createElement("div",{className:"form-group"},l().createElement("label",{className:"form-label"},"입금 은행"),l().createElement("select",{className:"form-select",value:n,onChange:function(e){return c(e.target.value)}},l().createElement("option",{value:""},"은행을 선택해주세요"),a.map(function(e){return l().createElement("option",{key:e.code,value:e.code},e.name)}))),l().createElement("div",{className:"transfer-notice"},l().createElement("p",null,"• 주문 후 24시간 이내에 입금해주세요."),l().createElement("p",null,"• 입금자명과 주문자명이 다를 경우 고객센터로 연락해주세요."))))},f=function(e){var t=e.refundAccount,r=e.banks,n=e.errors,a=e.onChange;return l().createElement("div",{className:"section refund-account-section"},l().createElement("h2",{className:"section-title"},"환불 계좌"),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"holderName",className:"form-label required"},"예금주"),l().createElement("input",{type:"text",id:"holderName",className:"form-input ".concat(n.holderName?"error":""),value:t.holderName,onChange:function(e){return a("holderName",e.target.value)},placeholder:"예금주명을 입력해주세요"}),n.holderName&&l().createElement("span",{className:"error-message"},n.holderName)),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"bankCode",className:"form-label required"},"은행"),l().createElement("select",{id:"bankCode",className:"form-select ".concat(n.bankCode?"error":""),value:t.bankCode,onChange:function(e){return a("bankCode",e.target.value)}},l().createElement("option",{value:""},"은행을 선택해주세요"),r.map(function(e){return l().createElement("option",{key:e.code,value:e.code},e.name)})),n.bankCode&&l().createElement("span",{className:"error-message"},n.bankCode)),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"accountNumber",className:"form-label required"},"계좌번호"),l().createElement("input",{type:"text",id:"accountNumber",className:"form-input ".concat(n.accountNumber?"error":""),value:t.accountNumber,onChange:function(e){return a("accountNumber",e.target.value)},placeholder:"계좌번호를 입력해주세요 (- 제외)"}),n.accountNumber&&l().createElement("span",{className:"error-message"},n.accountNumber)))},v=function(e){var t=e.termsLinks,r=e.termsAgreed,n=e.onTermsChange,a=e.onTermsView,o=t.filter(function(e){return e.required}).every(function(e){return r[e.id]});return l().createElement("div",{className:"section terms-section"},l().createElement("h2",{className:"section-title"},"약관 동의"),l().createElement("div",{className:"terms-all-agree"},l().createElement("label",{className:"terms-checkbox"},l().createElement("input",{type:"checkbox",checked:o,onChange:function(e){return r=e.target.checked,void t.forEach(function(e){n(e.id,r)});var r}}),l().createElement("span",null,"전체 동의"))),l().createElement("div",{className:"terms-list"},t.map(function(e){return l().createElement("div",{key:e.id,className:"terms-item"},l().createElement("label",{className:"terms-checkbox"},l().createElement("input",{type:"checkbox",checked:r[e.id]||!1,onChange:function(t){return n(e.id,t.target.checked)}}),l().createElement("span",null,e.required&&l().createElement("em",{className:"required"},"[필수]"),e.label)),l().createElement("button",{type:"button",className:"terms-view-button",onClick:function(){return a(e.url)}},"보기"))})))},h=function(e){var t=e.summary,r=e.onSubmit,n=e.isValid,a=e.isSubmitting,o=function(e){return e.toLocaleString("ko-KR")};return l().createElement("div",{className:"order-summary"},l().createElement("h2",{className:"summary-title"},"결제 정보"),l().createElement("div",{className:"summary-details"},l().createElement("div",{className:"summary-row"},l().createElement("span",{className:"label"},"상품 금액"),l().createElement("span",{className:"value"},o(t.totalProductAmount),"원")),t.productDiscountAmount>0&&l().createElement("div",{className:"summary-row discount"},l().createElement("span",{className:"label"},"상품 할인"),l().createElement("span",{className:"value"},"-",o(t.productDiscountAmount),"원")),t.couponDiscountAmount>0&&l().createElement("div",{className:"summary-row discount"},l().createElement("span",{className:"label"},"쿠폰 할인"),l().createElement("span",{className:"value"},"-",o(t.couponDiscountAmount),"원")),t.pointsDiscountAmount>0&&l().createElement("div",{className:"summary-row discount"},l().createElement("span",{className:"label"},"포인트 사용"),l().createElement("span",{className:"value"},"-",o(t.pointsDiscountAmount),"원")),l().createElement("div",{className:"summary-row"},l().createElement("span",{className:"label"},"배송비"),l().createElement("span",{className:"value"},0===t.deliveryFee?"무료":"".concat(o(t.deliveryFee),"원")))),l().createElement("div",{className:"summary-total"},l().createElement("span",{className:"label"},"최종 결제금액"),l().createElement("span",{className:"amount"},o(t.totalPaymentAmount),"원")),l().createElement("button",{className:"submit-button",onClick:r,disabled:!n||a},a?"처리중...":"".concat(o(t.totalPaymentAmount),"원 결제하기")))};function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof c?n:c,s=Object.create(i.prototype);return E(s,"_invoke",function(r,n,a){var o,c,i,s=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,c=0,i=e,d.n=r,l}};function p(r,n){for(c=r,i=n,t=0;!m&&s&&!a&&t<u.length;t++){var a,o=u[t],p=d.p,f=o[2];r>3?(a=f===n)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(c=0,d.v=n,d.n=o[1]):p<f&&(a=r<3||o[0]>n||n>f)&&(o[4]=r,o[5]=n,d.n=f,c=0))}if(a||r>1)return l;throw m=!0,n}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&p(u,f),c=u,i=f;(t=c<2?e:i)||!m;){o||(c?c<3?(c>1&&(d.n=-1),p(c,i)):d.n=i:d.v=i);try{if(s=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(m=d.n<0)?i:r.call(n,d))!==l)break}catch(t){o=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(r,a,o),!0),s}var l={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(E(t={},n,function(){return this}),t),m=s.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,E(m,"constructor",s),E(s,"constructor",i),i.displayName="GeneratorFunction",E(s,a,"GeneratorFunction"),E(m),E(m,a,"Generator"),E(m,n,function(){return this}),E(m,"toString",function(){return"[object Generator]"}),(y=function(){return{w:o,m:d}})()}function E(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}E=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){E(e,t,function(e){return this._invoke(t,r,e)})};o("next",0),o("throw",1),o("return",2)}},E(e,t,r,n)}function N(e,t,r,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,a)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function k(e,t,r){return(t=function(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const P=function(e){var t,r=e.data,n=e.utils,a=e.actions,m=r||{},b=m.items,E=void 0===b?[]:b,g=m.ordererInfo,O=m.coupons,P=void 0===O?[]:O,S=m.availablePoints,w=void 0===S?0:S,I=m.paymentMethods,j=void 0===I?[{id:"bank",name:"무통장입금",type:"bank",enabled:!0},{id:"card",name:"신용카드",type:"card",enabled:!1},{id:"virtual",name:"가상계좌",type:"virtual",enabled:!1}]:I,q=m.banks,x=void 0===q?[{code:"004",name:"KB국민은행"},{code:"011",name:"농협은행"},{code:"020",name:"우리은행"},{code:"088",name:"신한은행"},{code:"090",name:"카카오뱅크"}]:q,R=m.deliveryRequests,M=void 0===R?[{value:"door",label:"문 앞에 놓아주세요"},{value:"security",label:"경비실에 맡겨주세요"},{value:"call",label:"배송 전 연락주세요"},{value:"direct",label:"직접 받을게요"},{value:"custom",label:"직접 입력"}]:R,T=m.deliveryFee,F=void 0===T?3e3:T,D=m.freeShippingThreshold,V=void 0===D?5e4:D,_=m.showSameAsOrderer,L=void 0===_||_,K=m.showCoupon,G=void 0===K||K,B=m.showPoints,U=void 0===B||B,$=m.showRefundAccount,z=void 0===$||$,H=m.requireTermsAgreement,J=void 0===H||H,Q=m.termsLinks,W=void 0===Q?[{id:"purchase",label:"구매조건 확인 및 결제대행 서비스 약관 동의",url:"/terms/purchase",required:!0},{id:"privacy",label:"개인정보 제3자 제공 동의",url:"/terms/privacy",required:!0},{id:"marketing",label:"마케팅 정보 수신 동의",url:"/terms/marketing",required:!1}]:Q,X=(0,o.useRef)(null),Y=C((0,o.useState)(!1),2),Z=Y[0],ee=Y[1],te=C((0,o.useState)({}),2),re=te[0],ne=te[1],ae=C((0,o.useState)({deliveryInfo:{recipientName:"",recipientPhone:"",postalCode:"",roadAddress:"",detailAddress:"",deliveryRequest:"door",customRequest:""},ordererInfo:{name:(null==g?void 0:g.name)||"",email:(null==g?void 0:g.email)||"",phone:(null==g?void 0:g.phone)||""},selectedCouponId:void 0,usedPoints:0,paymentMethodId:(null===(t=j.find(function(e){return e.enabled}))||void 0===t?void 0:t.id)||"bank",refundAccount:{holderName:"",bankCode:"",accountNumber:""},termsAgreed:{},sameAsOrderer:!1}),2),oe=ae[0],le=ae[1],ce=C((0,o.useState)(""),2),ie=ce[0],se=ce[1];(0,o.useEffect)(function(){X.current&&(X.current.style.opacity="1")},[]);var ue=function(){var e=E.reduce(function(e,t){return e+t.price*t.quantity},0),t=0;if(oe.selectedCouponId){var r=P.find(function(e){return e.id===oe.selectedCouponId});r&&(!r.minOrderAmount||e>=r.minOrderAmount)&&(t="percent"===r.discountType?Math.floor(e*r.discountValue/100):r.discountValue)}var n=e-0-t-oe.usedPoints,a=n>=V?0:F;return{totalProductAmount:e,productDiscountAmount:0,couponDiscountAmount:t,pointsDiscountAmount:oe.usedPoints,deliveryFee:a,totalPaymentAmount:Math.max(0,n+a)}},me=function(){var e,t,r,n={};return oe.deliveryInfo.recipientName||(n.recipientName="받는 분 이름을 입력해주세요"),oe.deliveryInfo.recipientPhone||(n.recipientPhone="연락처를 입력해주세요"),oe.deliveryInfo.postalCode&&oe.deliveryInfo.roadAddress||(n.address="주소를 입력해주세요"),oe.deliveryInfo.detailAddress||(n.detailAddress="상세주소를 입력해주세요"),oe.ordererInfo.name||(n.ordererName="주문자 이름을 입력해주세요"),oe.ordererInfo.email||(n.ordererEmail="이메일을 입력해주세요"),oe.ordererInfo.phone||(n.ordererPhone="연락처를 입력해주세요"),z&&(null!==(e=oe.refundAccount)&&void 0!==e&&e.holderName||(n.holderName="예금주를 입력해주세요"),null!==(t=oe.refundAccount)&&void 0!==t&&t.bankCode||(n.bankCode="은행을 선택해주세요"),null!==(r=oe.refundAccount)&&void 0!==r&&r.accountNumber||(n.accountNumber="계좌번호를 입력해주세요")),J&&(W.filter(function(e){return e.required}).every(function(e){var t;return null===(t=oe.termsAgreed)||void 0===t?void 0:t[e.id]})||(n.terms="필수 약관에 동의해주세요")),ne(n),0===Object.keys(n).length},de=function(){var e,t=(e=y().m(function e(){var t,r;return y().w(function(e){for(;;)switch(e.n){case 0:if(me()){e.n=1;break}return(t=document.querySelector(".error"))&&t.scrollIntoView({behavior:"smooth",block:"center"}),e.a(2);case 1:if(ee(!0),e.p=2,null==a||!a.submitOrder){e.n=4;break}return e.n=3,a.submitOrder(A(A({},oe),{},{items:E,summary:ue()}));case 3:e.n=5;break;case 4:null!=n&&n.navigate&&n.navigate("/order/complete?orderId=MOCK123");case 5:e.n=7;break;case 6:e.p=6,r=e.v,console.error("Order submission failed:",r),alert("주문 처리 중 오류가 발생했습니다.");case 7:return e.p=7,ee(!1),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function l(e){N(o,n,a,l,c,"next",e)}function c(e){N(o,n,a,l,c,"throw",e)}l(void 0)})});return function(){return t.apply(this,arguments)}}(),pe=ue(),fe=E.length>0;return l().createElement("div",{className:"order-skin",ref:X},l().createElement("div",{className:"order-container"},l().createElement("div",{className:"order-content"},l().createElement(c,null),l().createElement(i,{deliveryInfo:oe.deliveryInfo,deliveryRequests:M,errors:re,onChange:function(e,t){le(function(r){return A(A({},r),{},{deliveryInfo:A(A({},r.deliveryInfo),{},k({},e,t))})}),ne(function(t){return A(A({},t),{},k({},e,void 0))})},onAddressSearch:function(){null!=a&&a.searchAddress?a.searchAddress(function(e){le(function(t){return A(A({},t),{},{deliveryInfo:A(A({},t.deliveryInfo),{},{postalCode:e.zonecode,roadAddress:e.roadAddress})})})}):alert("주소 검색 기능을 사용할 수 없습니다.")}}),l().createElement(s,{ordererInfo:oe.ordererInfo,errors:re,showSameAsOrderer:L,sameAsOrderer:oe.sameAsOrderer||!1,onChange:function(e,t){le(function(r){return A(A({},r),{},{ordererInfo:A(A({},r.ordererInfo),{},k({},e,t))})}),ne(function(t){return A(A({},t),{},k({},e,void 0))})},onSameAsOrdererChange:function(e){le(function(t){return A(A({},t),{},e?{sameAsOrderer:!0,deliveryInfo:A(A({},t.deliveryInfo),{},{recipientName:t.ordererInfo.name,recipientPhone:t.ordererInfo.phone})}:{sameAsOrderer:!1})})}}),l().createElement(u,{items:E}),(G||U)&&l().createElement(d,{coupons:P,availablePoints:w,selectedCouponId:oe.selectedCouponId,usedPoints:oe.usedPoints,showCoupon:G,showPoints:U,onCouponSelect:function(e){return le(function(t){return A(A({},t),{},{selectedCouponId:e})})},onPointsChange:function(e){return le(function(t){return A(A({},t),{},{usedPoints:e})})}}),l().createElement(p,{paymentMethods:j,selectedMethodId:oe.paymentMethodId,selectedBank:ie,banks:x,onMethodChange:function(e){return le(function(t){return A(A({},t),{},{paymentMethodId:e})})},onBankChange:se}),z&&l().createElement(f,{refundAccount:oe.refundAccount,banks:x,errors:re,onChange:function(e,t){le(function(r){return A(A({},r),{},{refundAccount:A(A({},r.refundAccount),{},k({},e,t))})}),ne(function(t){return A(A({},t),{},k({},e,void 0))})}}),J&&l().createElement(v,{termsLinks:W,termsAgreed:oe.termsAgreed||{},onTermsChange:function(e,t){return le(function(r){return A(A({},r),{},{termsAgreed:A(A({},r.termsAgreed),{},k({},e,t))})})},onTermsView:function(e){null!=n&&n.navigate?n.navigate(e):window.open(e,"_blank")}})),l().createElement("div",{className:"order-sidebar"},l().createElement(h,{summary:pe,onSubmit:de,isValid:fe,isSubmitting:Z}))))};return a.default})());