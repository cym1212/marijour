<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProductDetailSkin - API ìŠ¤í™ í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="./dist/product-detail/product-detail-skin.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .test-info {
            max-width: 1200px;
            margin: 0 auto;
            background: #e8f4ff;
            padding: 15px;
            border-left: 4px solid #007bff;
        }
        .test-info h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .test-info p {
            margin: 5px 0;
            color: #666;
        }
        .controls {
            max-width: 1200px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .controls h4 {
            margin-top: 0;
            color: #333;
        }
        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        .control-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .control-item label {
            font-weight: 500;
            color: #333;
        }
        .control-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        .control-item input[type="color"] {
            width: 60px;
            height: 30px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .test-container {
            background: white;
            margin: 20px auto;
            max-width: 1200px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section-divider {
            max-width: 1200px;
            margin: 40px auto;
            text-align: center;
            color: #999;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h3>ğŸš€ ProductDetailSkin - API ìŠ¤í™ í…ŒìŠ¤íŠ¸</h3>
        <p><strong>êµ¬í˜„ëœ ê¸°ëŠ¥:</strong></p>
        <p>âœ… 1. ìƒí’ˆ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ (ë©”ì¸ ì´ë¯¸ì§€ + ì¶”ê°€ ì´ë¯¸ì§€)</p>
        <p>âœ… 2. ìƒí’ˆ ì˜µì…˜ ë° ë³€í˜•(variant) ì„ íƒ ì‹œìŠ¤í…œ</p>
        <p>âœ… 3. ë“±ê¸‰ë³„ í• ì¸ ê°€ê²© ê³„ì‚°</p>
        <p>âœ… 4. ìˆ˜ëŸ‰ ì„ íƒ ë° ì¬ê³  ê´€ë¦¬</p>
        <p>âœ… 5. ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ ë° ë°”ë¡œêµ¬ë§¤ ê¸°ëŠ¥</p>
        <p>âœ… 6. íƒ­ ê¸°ë°˜ ìƒì„¸ ì •ë³´ (ì„¤ëª…, ë¦¬ë·°)</p>
        <p>âœ… 7. ê´€ë ¨ ìƒí’ˆ í‘œì‹œ</p>
        <p>âœ… 8. ëª¨ë°”ì¼ ë°˜ì‘í˜• ì§€ì› (ë°”í…€ì‹œíŠ¸)</p>
        <p>âœ… 9. ComponentProps ì„¤ì • (í‘œì‹œ/ìˆ¨ê¹€, ìƒ‰ìƒ)</p>
    </div>

    <!-- ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
    <div class="controls">
        <h4>ì†ì„± íŒ¨ë„ ì„¤ì •</h4>
        
        <!-- íƒ­ í‘œì‹œ ì„¤ì • -->
        <div class="control-group">
            <h5>íƒ­ í‘œì‹œ ì„¤ì •</h5>
            <div class="control-item">
                <input type="checkbox" id="showDescriptionTab" checked>
                <label for="showDescriptionTab">ì„¤ëª… íƒ­ í‘œì‹œ</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="showReviewsTab" checked>
                <label for="showReviewsTab">ë¦¬ë·° íƒ­ í‘œì‹œ</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="showStock">
                <label for="showStock">ì¬ê³  ì •ë³´ í‘œì‹œ</label>
            </div>
        </div>
        
        <!-- í‘œì‹œ ì˜µì…˜ ì„¤ì • -->
        <div class="control-group">
            <h5>í‘œì‹œ ì˜µì…˜ ì„¤ì •</h5>
            <div class="control-item">
                <input type="checkbox" id="showRelatedProducts" checked>
                <label for="showRelatedProducts">ê´€ë ¨ ìƒí’ˆ í‘œì‹œ</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="showQuantitySelector" checked>
                <label for="showQuantitySelector">ìˆ˜ëŸ‰ ì„ íƒê¸° í‘œì‹œ</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="showAddToCart" checked>
                <label for="showAddToCart">ì¥ë°”êµ¬ë‹ˆ ë²„íŠ¼ í‘œì‹œ</label>
            </div>
            <div class="control-item">
                <input type="checkbox" id="showBuyNow" checked>
                <label for="showBuyNow">ë°”ë¡œêµ¬ë§¤ ë²„íŠ¼ í‘œì‹œ</label>
            </div>
        </div>
        
        <!-- ìŠ¤íƒ€ì¼ ì„¤ì • -->
        <div class="control-group">
            <h5>ìŠ¤íƒ€ì¼ ì„¤ì •</h5>
            <div class="control-item">
                <label for="priceColor">ê°€ê²© ìƒ‰ìƒ:</label>
                <input type="color" id="priceColor" value="#ff6b6b">
            </div>
            <div class="control-item">
                <label for="addToCartButtonColor">ì¥ë°”êµ¬ë‹ˆ ë²„íŠ¼ ìƒ‰ìƒ:</label>
                <input type="color" id="addToCartButtonColor" value="#007bff">
            </div>
            <div class="control-item">
                <label for="buyNowButtonColor">ë°”ë¡œêµ¬ë§¤ ë²„íŠ¼ ìƒ‰ìƒ:</label>
                <input type="color" id="buyNowButtonColor" value="#28a745">
            </div>
            <div class="control-item">
                <label for="stockTextColor">ì¬ê³  í…ìŠ¤íŠ¸ ìƒ‰ìƒ:</label>
                <input type="color" id="stockTextColor" value="#28a745">
            </div>
        </div>
        
        <button onclick="updateComponent()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">ì„¤ì • ì ìš©</button>
    </div>

    <!-- ì»´í¬ë„ŒíŠ¸ í‘œì‹œ ì˜ì—­ -->
    <div id="productDetailContainer" class="test-container"></div>

    <div class="section-divider">
        --- ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸ í…ŒìŠ¤íŠ¸ ---
    </div>

    <!-- ëª¨ë°”ì¼ ì‹œë®¬ë ˆì´ì…˜ -->
    <div class="controls">
        <h4>ëª¨ë°”ì¼ ì‹œë®¬ë ˆì´ì…˜</h4>
        <button onclick="simulateMobile()" style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer;">ëª¨ë°”ì¼ ëª¨ë“œ ì‹œë®¬ë ˆì´ì…˜</button>
        <p style="margin-top: 10px; color: #666;">ëª¨ë°”ì¼ ëª¨ë“œì—ì„œëŠ” ì˜µì…˜ ì„ íƒì„ ìœ„í•œ ë°”í…€ì‹œíŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
    </div>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- ProductDetailSkin -->
    <script src="./dist/product-detail/product-detail-skin.umd.js"></script>

    <script>
        const ProductDetailSkin = window.ProductDetailSkin || window['product-detail-skin'] || window.ProductDetail;
        let currentRoot;
        let isMobileSimulation = false;

        // ê¸°ë³¸ ë°ì´í„°
        const defaultProduct = {
            id: 9,
            title: 'ë¯¸ë‹ˆë©€ ê¸€ë¼ìŠ¤ í…€ë¸”ëŸ¬ 6P',
            description: '<h3>ìƒí’ˆ íŠ¹ì§•</h3><p>ì‹¬í”Œí•˜ê³  ê¹”ë”í•œ ë””ìì¸ì˜ ê¸€ë¼ìŠ¤ í…€ë¸”ëŸ¬ ì„¸íŠ¸ì…ë‹ˆë‹¤.</p><ul><li>ê³ í’ˆì§ˆ ê¸€ë¼ìŠ¤ ì†Œì¬</li><li>6ê°œ êµ¬ì„± ì„¸íŠ¸</li><li>ë‹¤ì–‘í•œ ìŒë£Œì— ì í•©</li><li>ì‹ê¸°ì„¸ì²™ê¸° ì‚¬ìš© ê°€ëŠ¥</li></ul>',
            config: {
                img_url: '/image/product1.jpg',
                main_image: '/image/product1.jpg',
                discounted_price: 27600,
                default_price: 30000,
                stock_count: 50
            },
            additionalImages: [
                '/image/product1.jpg',
                '/image/product2.jpg',
                '/image/product3.jpg',
                '/image/product4.jpg'
            ],
            optionGroups: [
                {
                    id: 1,
                    code: 'color',
                    name: 'ìƒ‰ìƒ',
                    isRequired: true,
                    optionValues: [
                        { id: 1, code: 'clear', name: 'í´ë¦¬ì–´' },
                        { id: 2, code: 'blue', name: 'ë¸”ë£¨' },
                        { id: 3, code: 'green', name: 'ê·¸ë¦°' }
                    ]
                },
                {
                    id: 2,
                    code: 'size',
                    name: 'ì‚¬ì´ì¦ˆ',
                    isRequired: false,
                    optionValues: [
                        { id: 4, code: 'small', name: 'ìŠ¤ëª°' },
                        { id: 5, code: 'large', name: 'ë¼ì§€' }
                    ]
                }
            ],
            variants: [
                {
                    id: 1,
                    additionalPrice: 0,
                    stock: 20,
                    options: [
                        { optionValueId: 1, optionValue: { optionGroupId: 1 } },
                        { optionValueId: 4, optionValue: { optionGroupId: 2 } }
                    ]
                },
                {
                    id: 2,
                    additionalPrice: 2000,
                    stock: 15,
                    options: [
                        { optionValueId: 1, optionValue: { optionGroupId: 1 } },
                        { optionValueId: 5, optionValue: { optionGroupId: 2 } }
                    ]
                }
            ]
        };

        // ìœ í‹¸ë¦¬í‹°
        const utils = {
            t: (key) => key,
            navigate: (path) => console.log('Navigate to:', path),
            formatCurrency: (amount) => `${amount.toLocaleString()}ì›`,
            formatDate: (date) => new Date(date).toLocaleDateString(),
            getAssetUrl: (path) => path,
            cx: (...classes) => classes.filter(Boolean).join(' ')
        };

        // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ í•¨ìˆ˜
        function renderComponent() {
            const container = document.getElementById('productDetailContainer');
            if (!currentRoot) {
                currentRoot = ReactDOM.createRoot(container);
            }
            
            // ì„¤ì • ê°’ ê°€ì ¸ì˜¤ê¸°
            const componentProps = {
                showDescriptionTab: document.getElementById('showDescriptionTab').checked,
                showReviewsTab: document.getElementById('showReviewsTab').checked,
                showStock: document.getElementById('showStock').checked,
                showRelatedProducts: document.getElementById('showRelatedProducts').checked,
                showQuantitySelector: document.getElementById('showQuantitySelector').checked,
                showAddToCart: document.getElementById('showAddToCart').checked,
                showBuyNow: document.getElementById('showBuyNow').checked,
                priceColor: document.getElementById('priceColor').value,
                addToCartButtonColor: document.getElementById('addToCartButtonColor').value,
                buyNowButtonColor: document.getElementById('buyNowButtonColor').value,
                stockTextColor: document.getElementById('stockTextColor').value
            };
            
            // ê°€ê²© ì •ë³´ ê³„ì‚°
            const priceInfo = {
                originalPrice: defaultProduct.config.default_price,
                levelPrice: defaultProduct.config.discounted_price,
                discount: defaultProduct.config.default_price - defaultProduct.config.discounted_price,
                discountRate: Math.round(((defaultProduct.config.default_price - defaultProduct.config.discounted_price) / defaultProduct.config.default_price) * 100),
                levelName: 'ì‹¤ë²„íšŒì›'
            };
            
            currentRoot.render(React.createElement(ProductDetailSkin, {
                data: {
                    id: 'product-detail-test',
                    product: defaultProduct,
                    componentProps: componentProps,
                    priceInfo: priceInfo,
                    finalPrice: defaultProduct.config.discounted_price,
                    isMobile: isMobileSimulation,
                    isUserLoggedIn: true
                },
                actions: {
                    handleOptionChange: (groupId, valueId) => {
                        console.log('ì˜µì…˜ ì„ íƒ:', { groupId, valueId });
                    },
                    handleQuantityChange: (quantity) => {
                        console.log('ìˆ˜ëŸ‰ ë³€ê²½:', quantity);
                    },
                    handleAddToCart: async () => {
                        console.log('ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€');
                        alert('ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    },
                    handleBuyNow: async () => {
                        console.log('ë°”ë¡œêµ¬ë§¤');
                        alert('êµ¬ë§¤ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤!');
                    },
                    handleTabChange: (tab) => {
                        console.log('íƒ­ ë³€ê²½:', tab);
                    },
                    handleImageChange: (image) => {
                        console.log('ì´ë¯¸ì§€ ë³€ê²½:', image);
                    }
                },
                utils: utils,
                mode: 'production'
            }));
        }

        // ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸
        function updateComponent() {
            renderComponent();
        }

        // ëª¨ë°”ì¼ ì‹œë®¬ë ˆì´ì…˜
        function simulateMobile() {
            isMobileSimulation = !isMobileSimulation;
            renderComponent();
            if (isMobileSimulation) {
                alert('ëª¨ë°”ì¼ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ë°”í…€ì‹œíŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ì˜µì…˜ ì„ íƒ ì˜ì—­ì„ í´ë¦­í•˜ì„¸ìš”.');
            }
        }

        // ì´ˆê¸° ë Œë”ë§
        if (ProductDetailSkin) {
            renderComponent();
            console.log('âœ… ProductDetailSkin API ìŠ¤í™ í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ');
        } else {
            console.error('âŒ ProductDetailSkinì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            document.getElementById('productDetailContainer').innerHTML = 
                '<div style="color: red; text-align: center; padding: 50px;">âŒ ProductDetailSkinì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
        }
    </script>
</body>
</html>