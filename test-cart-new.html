<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Skin Test - New Version</title>
    <link rel="stylesheet" href="./dist/cart/cart-skin.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›’ Cart Skin Test - New Interface</h1>
        
        <!-- Test 1: ê´€ë¦¬ì ëª¨ë“œ (ë”ë¯¸ ë°ì´í„°) -->
        <div class="test-section">
            <div class="test-title">Test 1: ê´€ë¦¬ì ëª¨ë“œ (ë”ë¯¸ ë°ì´í„° + ì§ê¸‰ë³„ ê°€ê²©)</div>
            <div id="cart-admin-test"></div>
        </div>
        
        <!-- Test 2: ì‹¤ì œ ë°ì´í„° (ë¹ˆ ì¥ë°”êµ¬ë‹ˆ) -->
        <div class="test-section">
            <div class="test-title">Test 2: ë¹ˆ ì¥ë°”êµ¬ë‹ˆ</div>
            <div id="cart-empty-test"></div>
        </div>
        
        <!-- Test 3: ì‹¤ì œ ë°ì´í„° (ì¥ë°”êµ¬ë‹ˆ ìˆìŒ) -->
        <div class="test-section">
            <div class="test-title">Test 3: ì‹¤ì œ ë°ì´í„° (ì§ê¸‰ë³„ ê°€ê²© ì ìš©)</div>
            <div id="cart-real-test"></div>
        </div>
    </div>

    <!-- React ë° Cart ìŠ¤í‚¨ ë¡œë“œ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="./dist/cart/cart-skin.umd.js"></script>

    <script>
        const { createElement: h } = React;
        const { createRoot } = ReactDOM;

        // Test 1: ê´€ë¦¬ì ëª¨ë“œ
        const adminTestData = {
            data: {
                isAdminMode: true,
                cartItems: [], // ë¹ˆ ë°°ì—´ë¡œ ë”ë¯¸ ë°ì´í„° íŠ¸ë¦¬ê±°
                user: {
                    level: 'VIP',
                    levelName: 'ë¹„ì•„ì´í”¼'
                },
                localQuantities: {},
                freeShippingLimit: 50000,
                calculations: {
                    subtotal: 0,
                    shippingFee: 0,
                    total: 0
                }
            },
            actions: {
                handleIncreaseQuantity: async (itemId) => {
                    console.log('ìˆ˜ëŸ‰ ì¦ê°€:', itemId);
                },
                handleDecreaseQuantity: async (itemId) => {
                    console.log('ìˆ˜ëŸ‰ ê°ì†Œ:', itemId);
                },
                handleRemoveItem: async (itemId) => {
                    console.log('ì•„ì´í…œ ì‚­ì œ:', itemId);
                },
                handleCheckout: async () => {
                    console.log('ì£¼ë¬¸í•˜ê¸° í´ë¦­');
                },
                handleClearCart: async () => {
                    console.log('ì „ì²´ ì‚­ì œ í´ë¦­');
                },
                calculateLevelPrice: (item, level) => {
                    const defaultPrice = item.product?.config?.default_price || 0;
                    const levelPrices = item.product?.optionJson?.level2_price || {};
                    const levelPrice = levelPrices[level] || defaultPrice;
                    const discount = Math.max(0, defaultPrice - levelPrice);
                    const discountRate = defaultPrice > 0 ? Math.round((discount / defaultPrice) * 100) : 0;
                    
                    return {
                        originalPrice: defaultPrice,
                        levelPrice,
                        discount,
                        discountRate,
                        levelName: level
                    };
                }
            },
            options: {
                title: 'ì¥ë°”êµ¬ë‹ˆ (ê´€ë¦¬ì ëª¨ë“œ)',
                showQuantitySelector: true,
                showRemoveButton: true,
                primaryButtonColor: '#007bff'
            }
        };

        // Test 2: ë¹ˆ ì¥ë°”êµ¬ë‹ˆ
        const emptyTestData = {
            data: {
                cartItems: [],
                loading: false,
                calculations: {
                    subtotal: 0,
                    shippingFee: 0,
                    total: 0
                },
                localQuantities: {},
                freeShippingLimit: 50000,
                user: {
                    level: 'GOLD',
                    levelName: 'ê³¨ë“œ'
                }
            },
            actions: adminTestData.actions,
            options: {
                title: 'ì¥ë°”êµ¬ë‹ˆ (ë¹ˆ ìƒíƒœ)',
                emptyText: 'ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤. ì‡¼í•‘ì„ ì‹œì‘í•´ë³´ì„¸ìš”!'
            }
        };

        // Test 3: ì‹¤ì œ ë°ì´í„°
        const realTestData = {
            data: {
                cartItems: [
                    {
                        id: 1,
                        productId: 1,
                        count: 2,
                        variantId: null,
                        variant: null,
                        options: null,
                        product: {
                            id: 1,
                            title: 'í”„ë¦¬ë¯¸ì—„ ì„¸ë¼ë¯¹ ë¨¸ê·¸ì»µ ì„¸íŠ¸',
                            config: {
                                img_url: 'https://via.placeholder.com/150/cccccc/666666?text=Product',
                                default_price: 45000,
                                discounted_price: 40000,
                                stock_count: 10
                            },
                            optionJson: {
                                level2_price: {
                                    'VIP': 35000,
                                    'GOLD': 40000,
                                    'SILVER': 42000
                                }
                            }
                        }
                    },
                    {
                        id: 2,
                        productId: 2,
                        count: 1,
                        variantId: null,
                        variant: null,
                        options: null,
                        product: {
                            id: 2,
                            title: 'ìœ ê¸°ë† ëŒ€ë‚˜ë¬´ ì‹ê¸° ì„¸íŠ¸',
                            config: {
                                img_url: 'https://via.placeholder.com/150/eeeeee/999999?text=Bamboo',
                                default_price: 35000,
                                discounted_price: 30000,
                                stock_count: 5
                            },
                            optionJson: {
                                level2_price: {
                                    'VIP': 28000,
                                    'GOLD': 30000,
                                    'SILVER': 32000
                                }
                            }
                        }
                    }
                ],
                loading: false,
                calculations: {
                    subtotal: 110000,
                    shippingFee: 3000,
                    total: 113000
                },
                localQuantities: {
                    '1': 2,
                    '2': 1
                },
                freeShippingLimit: 50000,
                user: {
                    level: 'GOLD',
                    levelName: 'ê³¨ë“œ'
                },
                isUserLoggedIn: true
            },
            actions: adminTestData.actions,
            options: {
                title: 'ì¥ë°”êµ¬ë‹ˆ (ì‹¤ì œ ë°ì´í„°)',
                showQuantitySelector: true,
                showRemoveButton: true
            }
        };

        // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
        if (window.CartSkin && window.CartSkin.Cart) {
            const CartComponent = window.CartSkin.Cart;
            
            // Test 1
            const adminRoot = createRoot(document.getElementById('cart-admin-test'));
            adminRoot.render(h(CartComponent, adminTestData));
            
            // Test 2
            const emptyRoot = createRoot(document.getElementById('cart-empty-test'));
            emptyRoot.render(h(CartComponent, emptyTestData));
            
            // Test 3
            const realRoot = createRoot(document.getElementById('cart-real-test'));
            realRoot.render(h(CartComponent, realTestData));
            
            console.log('âœ… Cart ì»´í¬ë„ŒíŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
            console.log('ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤:');
            console.log('- ì§ê¸‰ë³„ ê°€ê²© ì‹œìŠ¤í…œ');
            console.log('- handleIncreaseQuantity/handleDecreaseQuantity ì•¡ì…˜');
            console.log('- localQuantitiesë¥¼ í†µí•œ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸');
            console.log('- count í•„ë“œ (quantity â†’ count)');
            console.log('- ë¬´ë£Œë°°ì†¡ í•œë„ í‘œì‹œ');
        } else {
            console.error('âŒ Cart ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
        }
    </script>
</body>
</html>